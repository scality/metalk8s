Installation
============

Installing as a ``git`` dependency
----------------------------------

.. warning::

   While this approach is likely the simplest, it requires a full clone of the
   ``scality/metalk8s`` repository, which is far from optimal.

.. important::

   This requires ``pip`` version 19 or higher to handle PEP 517 packages as
   generated by Poetry.

.. code:: console

   $ python3 -m pip install --use-pep517 \
       "git+https://github.com/scality/metalk8s.git#egg=lib_alert_tree&subdirectory=tools/lib-alert-tree"

Installing for development with Poetry
--------------------------------------

.. important::

   The command below needs to be executed from ``tools/lib-alert-tree/``

.. code:: console

   $ poetry install

Installing from a wheel or a source distribution
------------------------------------------------

.. important::

   The commands below need to be executed from ``tools/lib-alert-tree/``

Packages are not currently published to any remote repository.

Use ``poetry build`` to generate the following artifacts::

   ./dist/
   ├── lib_alert_tree-0.1.0-py3-none-any.whl
   └── lib-alert-tree-0.1.0.tar.gz

The wheel can be installed with:

.. code:: console

   $ pip install ./dist/lib_alert_tree-0.1.0-py3-none-any.whl
   Processing ./dist/lib_alert_tree-0.1.0-py3-none-any.whl
   Installing collected packages: lib-alert-tree
   Successfully installed lib-alert-tree-0.1.0

Similarly, the source can be installed with:

.. code:: console

   $ pip install ./dist/lib-alert-tree-0.1.0.tar.gz
   Processing ./dist/lib-alert-tree-0.1.0.tar.gz
     Installing build dependencies ... done
   Building wheels for collected packages: lib-alert-tree
     Running setup.py bdist_wheel for lib-alert-tree ... done
     Stored in directory: /home/user/.cache/pip/wheels/a8/34/5d/893ab01bce6a9f8fdbbbc5d4615dfd34e928638f22e7131759
   Successfully built lib-alert-tree
   Installing collected packages: lib-alert-tree
   Successfully installed lib-alert-tree-0.1.0
